/* ! I am Ugly! */

window.onload=function(){"use strict";var a=$('[role="tablist"]'),b=$(".choose-iframe-select"),c=$(".notifications"),d=$('[data-span="notificationTxt"]'),e=function(a,b){return"href"===b?a.getAttribute(b).split("#")[1]:a.getAttribute(b)},f=function(a){a.addClass("active").attr("aria-selected","true").removeAttr("aria-hidden")},g=function(a){a.removeClass("active").attr("aria-hidden","true").removeAttr("aria-selected")},h=function(a){var b=/(([a-z]{4,6}:\/\/)|(^|\s))([a-zA-Z0-9\-]+\.)+[a-z]{2,13}[\.\?\=\&\%\/\w\-]*\b([^@]|$)/;return b.test(a)},i=function(){return Modernizr.localstorage?!0:(console.error("Your browser does not support localStorage"),!1)},j=function(a){i()&&localStorage.setItem("reports",JSON.stringify(a))},k=function(){var a=localStorage.getItem("reports");if(!i())return!1;try{a=JSON.parse(a)}catch(b){console.error("The saved data was not in a valid JSON format")}return a||(a={}),a},l=function(){var a=k();$("form").each(function(a,b){$(b).find("input").each(function(a,b){$(b).val("")})}),$.each(a,function(b){if(a.hasOwnProperty(b)){var c=$('[data-settings="'+b+'"] fieldset [type="text"]'),d=$('[data-settings="'+b+'"] fieldset [type="url"]');$(a[b]).each(function(a,b){b.name&&b.url&&(c[a].value=b.name,d[a].value=b.url)}),t({target:$('[data-form="'+b+'"]').eq(0)[0]})}})},m=function(h){h.preventDefault();var i=h.target.value,j=!1;13===h.keyCode&&(b.each(function(a,b){var c=$(b).find("option"),d=e(b,"data-select");c.each(function(a,c){var e=c.text.indexOf(i),h=c.value;return e>-1?(g($('div[role="tabpanel"]')),g($('a[role="tab"]')),f($('[data-link="'+d+'"]')),f($('[data-div="'+d+'"]')),b.selectedIndex=a,$('[data-iframe="'+d+'"]').attr("src",h),void(j=!0)):void 0})}),j||(c.hasClass("hidden")?(c.removeClass("hidden"),a.css({top:"330px"}),d.html("The searched report <b>"+i+"</b> was not found")):d.html("The searched report <b>"+i+"</b> was not found")))},n=function(){var a=$('a[role="tab"]'),b=$('li a[href="'+location.hash.replace("panel-","")+'"]');""===location.hash&&(b[0]=a[0]),o({target:b[0]})},o=function(a){a.preventDefault&&a.preventDefault();var b=a.target,c=e(b,"href"),d=$("#"+c+" input").eq(0);location.hash="panel-"+c.replace("#",""),g($('div[role="tabpanel"]')),g($('a[role="tab"]')),f($('a[href="#'+c+'"]')),f($("#"+c)),(13===a.keyCode||32===a.keyCode)&&(location.hash="panel-"+c.replace("#","")),d&&(""===d.val()?d.focus():d.blur())},p=function(a){var b=a.currentTarget,c=e(b,"data-settings");27===a.keyCode&&($(b).addClass("hidden"),$('[data-btn="'+c+'"]').removeClass("active"),$('[data-settings="'+c+'"]').removeClass("active").hasClass("hidden"))},q=function(a){a.preventDefault();var b=a.target,c=e(b,"data-btn"),d=$('[data-settings="'+c+'"]');d.toggleClass("hidden"),$(b).toggleClass("active")},r=function(a){a.preventDefault();var b=a.target,c=e(b,"data-link");$('[data-settings="'+c+'"]').addClass("hidden").hasClass("hidden"),$('[data-btn="'+c+'"]').removeClass("active")},s=function(a){a.preventDefault(),l(),r(a)},t=function(a){a.preventDefault&&a.preventDefault();var b=!1,c=!0,d=a.target,f=e(d,"data-form"),g=$('[data-select="'+f+'"]'),i=$('[data-settings="'+f+'"] fieldset'),l=[],m=k(),n=0;g.empty(),0===l.length&&($('[data-selectContainer="'+f+'"]').addClass("hidden"),$('[data-iframe="'+f+'"]').addClass("hidden"),$('[data-expand="'+f+'"]').addClass("hidden")),i.each(function(a,d){var e=$(d.getElementsByTagName("INPUT")[0]),j=e.val(),k=$(d.getElementsByTagName("INPUT")[1]),m=k.val();if(b=!1,""===j&&""===m&&(n++,n===i.size()&&($(i.eq(0).find("input")[0]).addClass("error").focus(),b=!1,localStorage.clear())),e.removeClass("error"),k.removeClass("error"),""===j&&""!==m)return e.addClass("error").focus(),b=!1,void(c=!1);if(""!==m&&-1===m.indexOf("http://")&&(m="http://"+m),(""===m||!h(m))&&""!==j)return k.addClass("error").focus(),b=!1,void(c=!1);if(""!==j&&h(m)&&(k.removeClass("error"),b=!0),b){$('[data-btn="'+f+'"]').removeClass("active"),$('[data-settings="'+f+'"]').hasClass("hidden");var o=$("<option>");o.html(j).val(m),g.append(o),$('[data-expand="'+f+'"]').removeClass("hidden"),$('[data-selectContainer="'+f+'"]').removeClass("hidden"),$('[data-iframe="'+f+'"]').removeClass("hidden")}else j="",m="";l.push({name:j,url:m})}),l.length>0&&(m[f]=l,j(m),u(f,g.children().size()-1),c&&$('[data-settings="'+f+'"]').addClass("hidden"))},u=function(a,b){"object"==typeof a&&(a=e(a.target,"data-select"));var c=$('[data-select = "'+a+'"]').get()[0],d=c.options[b?b:c.selectedIndex],f=d.value;b&&(c.selectedIndex=b),$('[data-iframe="'+a+'"]').attr("src",f)},v=function(a){a.preventDefault();var b=a.target,c=e(b,"data-expand"),d=$('[data-iframe="'+c+'"]').attr("src");$('[data-iframe="'+c+'"]').hasClass("hidden")||(window.open(d,"_blank"),window.focus())};n(),l(),$(".tab-headers").on("click keypress",o),$(window).on("hashchange",n),$('input[name="q"]').on("keyup",m),$(".action-btn.settings").on("click",q),$(".link.cancel-form").on("click",s),$(".btn.btn__submit-form").on("click",t),$(".tab-content-settings").on("keyup",p),$(".choose-iframe-select").on("change",u),$(".action-btn.expand").on("click",v),$.get("../../webapp/data/notification.txt",function(){console.log("success!")}).done(function(b){console.log("success again!"),c.removeClass("hidden"),d.html(b),a.css({top:"330px"})}).fail(function(){console.log("faillll")})}();
//# sourceMappingURL=main.min.js.map